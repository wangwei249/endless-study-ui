{"version":3,"sources":["Scripts/podium.js","Scripts/row.js","Scripts/platform-material.js","Scripts/restart.js","Scripts/player.js","Scripts/rows.js","Scripts/camera.js","Scripts/css-handler.js","Scripts/game.js","Scripts/htmlHandler.js","Scripts/ingame.js","Scripts/platform.js","Scripts/scoreKeeper.js"],"names":[],"mappings":"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","sourcesContent":["// podium.js\nvar Podium = pc.createScript('podium');\n\n// initialize code called once per entity\nPodium.prototype.initialize = function() {\n    var app = this.app;\n\n    this.player = app.root.findByName(\"Player\");\n    this.player.script.player.on(\"jump\", this.onPlayerJump, this);\n\n    this.game = app.root.findByName(\"Root\");\n    this.game.script.game.on(\"reset\", this.onReset, this);\n\n    this.model = this.entity.findByName(\"Model\");\n    this.color = new pc.Color();\n\n    this.start = this.entity.getPosition().clone();\n};\n\n// update code called every frame\nPodium.prototype.update = function(dt) {\n    if (this.tweening) {\n        this.entity.translate(-10*dt, 0, 0);\n    }\n};\n\nPodium.prototype.onPlayerJump = function () {\n    this.tweening = true;\n};\n\nPodium.prototype.onReset = function () {\n    this.tweening = false;\n    this.entity.setPosition(this.start);\n};\n\n\n","// row.js\nvar Row = pc.createScript('row');\n\nvar MIN = -5;\nvar MAX = 5;\n\n// initialize code called once per entity\nRow.prototype.initialize = function() {\n    var app = this.app;\n\n    this.game = app.root.findByName(\"Root\");\n    this.game.script.game.on(\"reset\", this.onReset, this);            \n    this.children = this.entity.children;\n    this.tweening = false;\n\n    this.start = this.entity.getPosition().clone();\n};\n\n// update code called every frame\nRow.prototype.update = function(dt) {\n    if (this.tweening) {\n        this.entity.translate(-10*dt, 0, 0);\n    }\n};\n\nRow.prototype.animate = function () {\n    this.tweening = true;\n};\n\nRow.prototype.reset = function (i) {\n    var z = i * 4;\n    this.entity.setPosition(0, 0, z);\n};\n\nRow.prototype.onReset = function () {\n    this.entity.setPosition(this.start);\n    this.tweening = false;\n};\n\n\n","// platform-material.js\nvar PlatformMaterial = pc.createScript('platformMaterial');\n\n// initialize code called once per entity\nPlatformMaterial.prototype.initialize = function() {\n    setTimeout(function () {\n        this.setRandomMaterial();\n    }.bind(this), 0);\n\n    this.model = null;\n    this.white = this.app.assets.find(\"White\", \"material\").resource;\n};\n\n// update code called every frame\nPlatformMaterial.prototype.update = function(dt) {\n    if (this.flashing > 0) {\n        this.flashing -= dt;\n        if (this.flashing < 0) {\n            this.model.model.meshInstances[0].material = this.material;\n        }\n    }\n};\n\nPlatformMaterial.prototype.setRandomMaterial = function () {\n    this.model = this.entity.findByName(\"Model\");\n    if (this.model) {\n        var app = this.app;\n\n        var materials = [\n            app.assets.find(\"Cyan\", \"material\"),\n            app.assets.find(\"Purple\", \"material\"),\n            app.assets.find(\"Blue\", \"material\"),\n            app.assets.find(\"Pink\", \"material\")\n        ];\n\n        var i = Math.floor(pc.math.random(0, 4));\n\n        this.material = materials[i].resource;\n        this.model.model.meshInstances[0].material = this.material;\n    }\n};\n\nPlatformMaterial.prototype.flash = function () {\n    this.model.model.meshInstances[0].material = this.white;\n    this.flashing = 0.1;\n};\n\n\n","// restart.js\nvar Restart = pc.createScript('restart');\n\nRestart.attributes.add('playButton', { type: 'asset', assetType: 'texture' });\nRestart.attributes.add('appStoreButton', { type: 'asset', assetType: 'texture' });\n\n// initialize code called once per entity\nRestart.prototype.initialize = function() {\n    var app = this.app;\n    \n    this.game = app.root.findByName(\"Root\");\n\n    this.entity.script.htmlHandler.on(\"template\", this.onTemplate, this);\n};\n\nfunction drawCircle(ctx, x, y, r) {\n    ctx.beginPath();\n    ctx.arc(x, y, r, 0, 2*Math.PI);\n    ctx.stroke();\n    ctx.fill();\n}\n\nfunction drawTriangle(ctx, x, y, size) {\n    var path=new Path2D();\n    var a = 0;\n    var r = size;\n    path.moveTo(x + r*Math.cos(a), y + r*Math.sin(a));\n    a = 120*Math.PI/180;\n    path.lineTo(x + r*Math.cos(a), y + r*Math.sin(a));\n    a = 240*Math.PI/180;\n    path.lineTo(x + r*Math.cos(a), y + r*Math.sin(a));\n    a = 360*Math.PI/180;\n    path.lineTo(x + r*Math.cos(a), y + r*Math.sin(a));\n    ctx.fill(path);\n}\n\nRestart.prototype.onTemplate = function (element) {\n    var canvas = document.getElementById(\"c\");\n    if (canvas) {\n        var ctx = canvas.getContext(\"2d\");\n        ctx.strokeStyle = \"#ffffff\";\n        ctx.lineWidth = 2;\n\n        ctx.fillStyle = \"#222\";\n        drawCircle(ctx, 50, 50, 48);\n\n        ctx.fillStyle = \"#ffffff\";\n        drawTriangle(ctx,50, 50, 12);\n    }\n\n    this.score = document.querySelector(\".restart-score\");\n    this.setScore(this.game.script.game.score);\n\n    var appStoreButton = document.getElementById('app-store-button');\n    if (appStoreButton) {\n        appStoreButton.src = this.appStoreButton.getFileUrl();\n        appStoreButton.addEventListener('click', function () {\n            // Add support for Snapchat CTA\n            // The URL is replaced with what is set in Snapchat's Ad Campaign manager\n            if (window.snapchatCta) {\n                snapchatCta();\n            } else {\n                window.open(\"https://playcanvas.com\");\n            }\n        }); \n    }\n\n    var button = document.getElementById('restart-button');\n    if (button) {\n        button.src = this.playButton.getFileUrl();\n\n        button.addEventListener(\"mousedown\", function (e) {\n            button.classList.add(\"active\");\n        }, true);\n\n        button.addEventListener(\"mouseup\", function (e) {\n            button.classList.remove(\"active\");\n            this.game.script.game.start();\n            this.entity.enabled = false;\n        }.bind(this), true);\n\n        button.addEventListener(\"touchstart\", function (e) {\n            button.classList.add(\"active\");\n            e.preventDefault();\n        }, true);\n\n        button.addEventListener(\"touchend\", function (e) {\n            button.classList.remove(\"active\");\n            this.game.script.game.start();\n            this.entity.enabled = false;\n            e.preventDefault();\n        }.bind(this), true);                \n    }\n\n    var page = document.querySelector(\".restart\");\n    if (page) {\n        page.classList.add(\"animate\");\n    }\n};\n\nRestart.prototype.setScore = function (score) {\n    if (this.score) {\n        this.score.textContent = score;\n    }\n};\n\nRestart.prototype.onEnable = function () {\n    var button = document.querySelector('.button');\n    if (button) {\n        button.classList.add(\"button-animate\");    \n    }\n};\n\n\n","// player.js\nvar Player = pc.createScript('player');\n\nPlayer.attributes.add('gravity', { type: 'number', default: -30 });\nPlayer.attributes.add('jumpTime', { type: 'number', default: 0.7 });\n\nvar tmp = new pc.Vec3();\nvar GAP = 4;\nvar TUMBLE_SPEED = 180;\n\nvar _rows = null;\n\n// initialize code called once per entity\nPlayer.prototype.initialize = function() {\n    var app = this.app;\n\n    this.vel = new pc.Vec3();\n    this.acc = new pc.Vec3(0, this.gravity, 0);\n\n    this.start = this.entity.getPosition().clone();\n\n    this.rows = app.root.findByName(\"Rows\");\n    this.game = app.root.findByName(\"Root\");\n    this.game.script.game.on(\"reset\", this.onReset, this);\n    this.acc = new pc.Vec3(0, this.gravity, 0);\n\n    this.current = null;\n    this.angVel = 0;\n\n    this.falling = false;\n    this.jumping = false;\n    this.jump = false;\n    this.recycling = false;\n\n    app.mouse.on(\"mousedown\", function () {\n        if (this.game.script.game.state !== \"playing\") {\n            return;\n        }\n        if (!this.jumping && !this.falling) {\n            this.jump = true;                    \n        }\n    }, this);\n\n    if (app.touch) {\n        app.touch = new pc.TouchDevice(window);\n        app.touch.on(\"touchstart\", function () {\n            if (this.game.script.game.state !== \"playing\") {\n                return;\n            }\n            if (!this.jumping && !this.falling) {\n                this.jump = true;                    \n            }                \n        }, this);                \n    }\n\n    _rows = this.rows.script.rows;\n};\n\n// update code called every frame\nPlayer.prototype.update = function(dt) {\n    var p;\n\n    if (this.freeze) \n        return;\n\n\n    if (!this.falling && !this.jumping && this.jump) {\n        this.jump = false;\n        this.jumping = true;\n        this.current = null;\n        this.angVel = 0;\n        var x = GAP / this.jumpTime;\n        var y = -0.5 * this.acc.y * this.jumpTime;\n        this.vel.set(x, y, 0);\n\n        this.fire(\"jump\");\n    }\n\n    if (this.falling) {\n        tmp.copy(this.acc).scale(dt);\n        this.vel.add(tmp);\n\n        tmp.copy(this.vel).scale(dt);\n        p = this.entity.getPosition();\n        p.add(tmp);\n\n        this.entity.rotate(this.angVel*dt, 0, 0);\n\n        this.entity.setPosition(p);\n\n        return;\n    }\n\n    if (this.jumping) {\n        tmp.copy(this.acc).scale(dt);\n        this.vel.add(tmp);\n\n        tmp.copy(this.vel).scale(dt);\n        p = this.entity.getPosition();\n        p.add(tmp);\n        \n        // if(this.vel.y<=0){\n        //     alert(\"max height:\"+p.y);\n        // }\n\n        if (p.x > 35.5) {\n            p.x = 36;\n            this.freeze = true;\n            this.die();\n        }\n\n        \n        \n        if (p.y < this.start.y) {\n            this.jumping = false;\n\n            p.x = Math.round(p.x);\n            p.y = this.start.y;\n\n            var result = _rows.checkPlayer(p, this.entity.collision.halfExtents.z);\n            if (result.platform) {\n                if (result.type === 0) {\n                    // success\n                    result.platform.script.platformMaterial.flash();\n                    result.platform.script.platform.dip();\n                    this.current = result.platform;\n                    this.offsetZ = p.z - this.current.getPosition().z;\n                    this.game.script.game.addScore(1);\n                } else if (result.type === 1) {\n                    // tumble left\n                    result.platform.script.platform.dip();\n                    this.falling = true;\n                    this.vel.set(0,0,5);\n                    this.angVel = TUMBLE_SPEED;\n                    this.die();\n                } else if (result.type === 2) {\n                    // tumble right\n                    result.platform.script.platform.dip();\n                    this.falling = true;\n                    this.vel.set(0,0,-5);\n                    this.angVel = -TUMBLE_SPEED;\n                    this.die();\n                }\n\n                // recycle row\n                var row = (result.row - 1) % 8;\n                if (result.row >= 1) {\n                    this.recycling = true;\n                }\n                if (this.recycling) {\n                    this.rows.script.rows.recycleRow(row);                            \n                }\n            } else {\n                this.falling = true;\n                this.vel.x = 0;\n                this.die();\n            }\n        }\n\n        this.entity.setPosition(p);\n    } else {\n        if (this.current) {\n            p = this.entity.getPosition();\n            p.y = this.current.getPosition().y + 1.5;\n            p.z = this.current.getPosition().z + this.offsetZ;\n            this.entity.setPosition(p);\n        }\n    }\n};\n\nPlayer.prototype.die = function () {\n    this.fire(\"die\");\n    this.game.script.game.gameover();\n};\n\nPlayer.prototype.onReset = function () {\n    this.entity.setPosition(this.start);\n    this.entity.setLocalEulerAngles(0,0,0);\n    this.jumping = false;\n    this.vel.set(0,0,0);\n    this.current = null;\n    this.falling = false;\n    this.recycling = false;\n    this.freeze = false;\n};\n\n\n","// rows.js\nvar Rows = pc.createScript('rows');\n\nvar result = {\n    platform: null,\n    type: 0,\n    row: -1\n};\n\n// window.setScore = function (score) {\n//     alert(score);\n// };\n\n\n\n\n// initialize code called once per entity\nRows.prototype.initialize = function() {\n    var app = this.app;\n    //window.setScore(10);\n    this.player = app.root.findByName(\"Player\");\n    this.rows = this.entity.children;\n\n    this.templates = app.root.findByName(\"Templates\").children;\n    \n    //alert(\"准备调用score:set\");\n    app.fire(\"score:set\", score);\n\n    //调用父页面传参\n    window.parent.postMessage({\n          score: 35,\n         }, '*');\n\n    setTimeout(function () {\n        this.fillRow(this.rows[0], -5);\n        this.fillRow(this.rows[1], 5);\n        this.fillRow(this.rows[2], -5);\n        this.fillRow(this.rows[3], 5);\n        this.fillRow(this.rows[4], -5);\n        this.fillRow(this.rows[5], 5);\n        this.fillRow(this.rows[6], -5);\n        this.fillRow(this.rows[7], 5);\n        this.fillRow(this.rows[8], -5);\n    }.bind(this), 0);\n};\n\nRows.prototype.getPlatform = function () {\n    var i = Math.floor(pc.math.random(0, this.templates.length));\n    return this.templates[i].clone();\n};\n\nRows.prototype.recycleRow = function (index) {\n    console.log(\"recycling: \" + index);\n    var row = this.rows[index];\n    row.script.row.animate();                \n};\n\nRows.prototype.fillRow = function (row, speed) {\n    var z = pc.math.random(-18, -16);\n    var max = 20;\n    var step = 3;\n\n    var rp = row.getPosition();\n    while (z < max) {\n        var platform = this.getPlatform();\n        row.addChild(platform);\n        platform.setPosition(rp.x, rp.y, z);\n        platform.script.platform.setSpeed(speed);\n        z += step + platform.collision.halfExtents.z*2;    \n    }\n};\n\nRows.prototype.checkPlayer = function (pos, halfwidth) {\n    var row = null;\n    var i = 0, n = this.rows.length;\n    var p, platformHalfExtents;\n    var rowIndex;\n    for (i = 0; i < n; i++) {\n        rowIndex = i;\n        row = this.rows[i];\n        p = row.getPosition();\n        if (pos.x > p.x - 0.1 && pos.x < p.x + 0.1) {\n            break;\n        }\n        row = null;\n    }\n\n    // clear result\n    result.platform = null;\n\n    if (row) {\n        var platforms = row.children;\n        i = 0;\n        n = platforms.length;\n        for (i = 0; i < n; i++) {\n            p = platforms[i].getPosition();\n            platformHalfWidth = platforms[i].collision.halfExtents.z;\n\n            var playerMin = pos.z - halfwidth;\n            var playerMax = pos.z + halfwidth;\n\n            var platformMin = p.z - platformHalfWidth;\n            var platformMax = p.z + platformHalfWidth;                    \n\n            if (playerMin > platformMax || playerMax < platformMin) {\n                continue;\n            }\n\n            if (pos.z > platformMax) {\n                // topple left\n                result.platform = platforms[i];\n                result.type = 1;\n                result.row = rowIndex;\n                return result;\n            }\n            if (pos.z < platformMin) {\n                // topple right\n                console.log(pos.z, platformMin);\n                result.platform = platforms[i];\n                result.type = 2;\n                result.row = rowIndex;\n                return result;\n            }\n\n            console.log(pos.z, platformMin);\n            result.platform = platforms[i];\n            result.type = 0;\n            result.row = rowIndex;\n            return result;\n        }\n    }\n\n    return result;\n};\n\n\n","// camera.js\nvar Camera = pc.createScript('camera');\n\nvar offset = new pc.Vec3();\n\n// initialize code called once per entity\nCamera.prototype.initialize = function() {\n    var app = this.app;\n    this.player = app.root.findByName(\"Player\");\n    this.game = app.root.findByName(\"Root\");\n    this.game.script.game.on(\"reset\", this.onReset, this);\n\n    this._start = this.entity.getPosition().clone();\n    this._offset = new pc.Vec3().copy(this.player.getPosition()).sub(this._start);\n\n    this.entity.camera.frustumCulling = true;\n};\n\n// update code called every frame\nCamera.prototype.postUpdate = function(dt) {\n    offset.copy(this.player.getPosition()).sub(this.entity.getPosition());\n    var l = offset.x - this._offset.x;\n    if (l > 4) {\n        var speed = 10 * (l-4)/4;\n        speed = Math.max(speed, 1);\n        this.entity.translate(speed*dt, 0, 0);\n    }\n};\n\nCamera.prototype.onReset = function () {\n    this.entity.setPosition(this._start);\n};\n\n\n","// css-handler.js\n// this script can reference html asset as an attribute\n// and will live update dom and reattach events to it on html changes\n// so that launcher don't need to be refreshed during development\nvar CssHandler = pc.createScript('cssHandler');\n\nCssHandler.attributes.add('css', { type: 'asset', assetType: 'css' });\n\n// initialize code called once per entity\nCssHandler.prototype.initialize = function() {\n    // create STYLE element\n    this.element = document.createElement('style');\n\n    // append to head\n    document.head.appendChild(this.element);\n\n    // asset\n    this.asset = null;\n    this.assetId = 0;\n};\n\n// update code called every frame\nCssHandler.prototype.update = function(dt) {\n    // check for swapped asset\n    // if so, then start asset loading and templating\n    if (this.assetId !== this.css.id)\n        this.attachAsset(this.css.id, this.template);\n};\n\nCssHandler.prototype.attachAsset = function(assetId, fn) {\n    // remember current assetId\n    this.assetId = assetId;\n\n    // might be no asset provided\n    if (! this.assetId)\n        return fn.call(this);\n\n    // get asset from registry\n    var asset = this.app.assets.get(this.assetId);\n\n    // store callback of an asset load event\n    var self = this;\n    asset._onLoad = function(asset) {\n        fn.call(self, asset, asset.resource);\n    };\n\n    // subscribe to changes on resource\n    asset.on('load', asset._onLoad);\n    // callback\n    fn.call(this, asset, asset.resource);\n    // load asset if not loaded\n    this.app.assets.load(asset);\n};\n\nCssHandler.prototype.template = function(asset, css) {\n    // unsubscribe from old asset load event if required\n    if (this.asset && this.asset !== asset)\n        this.asset.off('load', this.asset._onLoad);\n\n    // remember current asset\n    this.asset = asset;\n\n    // template element\n    // you can use templating languages with renderers here\n    // such as hogan, mustache, handlebars or any other\n    this.element.innerHTML = css || '';\n};\n\n\n","// game.js\nvar Game = pc.createScript('game');\n\n// initialize code called once per entity\nGame.prototype.initialize = function() {\n    var app = this.app;\n\n    this.score = 0;\n\n    this.state = \"menu\";\n\n    this.restart = app.root.findByName(\"Restart\");\n    this.ingame = app.root.findByName(\"InGame\");\n\n    this.resize();\n    window.addEventListener(\"resize\", this.resize.bind(this), false);\n};\n\nGame.prototype.resize = function () {\n    var W = 640;\n//     if (window.innerWidth > W) {\n//         var div;\n//         div = document.querySelector(\"#left-blocker\");\n//         if (!div) \n//             div = document.createElement(\"div\");\n//         div.id = \"left-blocker\";\n//         div.style.position = \"absolute\";\n//         div.style.top = \"0\";\n//         div.style.left = \"0\";\n//         div.style.bottom = \"0\";\n//         div.style.width = (window.innerWidth - W)/2 + \"px\";\n//         div.style.backgroundColor = \"black\";\n//         document.body.appendChild(div);\n\n//         div = document.querySelector(\"#right-blocker\");\n//         if (!div) \n//             div = document.createElement(\"div\");\n//         div.id = \"right-blocker\";\n//         div.style.position = \"absolute\";\n//         div.style.top = \"0\";\n//         div.style.right = \"0\";\n//         div.style.bottom = \"0\";\n//         div.style.width = (window.innerWidth - W)/2 + \"px\";\n//         div.style.backgroundColor = \"black\";\n//         document.body.appendChild(div);\n//     }            \n};\n\nGame.prototype.addScore = function (i) {\n    this.score += i;\n    if (this.state === \"playing\") {\n        this.ingame.script.inGame.onTemplate();\n    }\n};\n\nGame.prototype.start = function () {\n    this.reset();\n    this.state = \"playing\";\n    this.score = 0;\n    this.ingame.enabled = true;\n};\n\nGame.prototype.gameover = function () {\n    this.state = \"menu\";\n    this.restart.enabled = true;\n    this.ingame.enabled = false;\n};\n\nGame.prototype.reset = function () {\n    this.state = \"menu\";\n    this.fire(\"reset\");\n};\n\n\n","// htmlHandler.js\n// this script can reference html asset as an attribute\n// and will live update dom and reattach events to it on html changes\n// so that launcher don't need to be refreshed during development\nvar HtmlHandler = pc.createScript('htmlHandler');\n\nHtmlHandler.attributes.add('html', { type: 'asset', assetType: 'html' });\n\n// initialize code called once per entity\nHtmlHandler.prototype.initialize = function() {\n    // create DIV element\n    this.element = document.createElement('div');\n    this.element.classList.add('container');\n\n    // append to body\n    // can be appended somewhere else\n    // it is recommended to have some container element\n    // to prevent iOS problems of overfloating elements off the screen\n    document.body.appendChild(this.element);\n\n    // asset\n    this.asset = null;\n    this.assetId = 0;\n\n    this.counter = 0;\n\n    this.on('enable', function () {\n        if (this.asset) {\n            if (!this.element.parentNode) {\n                document.body.appendChild(this.element);  \n            }\n            this.template(this.asset, this.asset.resource);\n        }\n    });\n\n    this.on('disable', function () {\n        this.element.parentNode.removeChild(this.element);\n    });\n};\n\n// update code called every frame\nHtmlHandler.prototype.update = function(dt) {\n    // check for swapped asset\n    // if so, then start asset loading and templating\n    if (this.assetId !== this.html.id)\n        this.attachAsset(this.html.id, this.template);\n};\n        \nHtmlHandler.prototype.attachAsset = function(assetId, fn) {\n    // remember current assetId\n    this.assetId = assetId;\n\n    // might be no asset provided\n    if (! this.assetId)\n        return fn.call(this);\n\n    // get asset from registry\n    var asset = this.app.assets.get(this.assetId);\n\n    // store callback of an asset load event\n    var self = this;\n    asset._onLoad = function(asset) {\n        fn.call(self, asset, asset.resource);\n    };\n\n    // subscribe to changes on resource\n    asset.on('load', asset._onLoad);\n    // callback\n    fn.call(this, asset, asset.resource);\n    // load asset if not loaded\n    this.app.assets.load(asset);\n};\n\nHtmlHandler.prototype.template = function(asset, html) {\n    // unsubscribe from old asset load event if required\n    if (this.asset && this.asset !== asset)\n        this.asset.off('load', this.asset._onLoad);\n\n    // remember current asset\n    this.asset = asset;\n\n    // template element\n    // you can use templating languages with renderers here\n    // such as hogan, mustache, handlebars or any other\n    this.element.innerHTML = html || '';\n\n    // bind some events to dom of an element\n    // it has to be done on each retemplate\n    if (html)\n        this.bindEvents();\n\n    this.fire(\"template\", this.element);\n};\n\nHtmlHandler.prototype.bindEvents = function() {\n    var self = this;\n};\n\n\n","// ingame.js\nvar InGame = pc.createScript('inGame');\n\n// initialize code called once per entity\nInGame.prototype.initialize = function() {\n    this.game = this.app.root.findByName(\"Root\");\n    this.entity.script.htmlHandler.on(\"template\", this.onTemplate, this);\n};\n\nInGame.prototype.onTemplate = function (element) {\n    var score = document.querySelector(\".ingame-score\");\n    if (score) {\n        score.textContent = this.game.script.game.score;\n    }\n};\n\n\n","// platform.js\nvar Platform = pc.createScript('platform');\n\nvar MIN = -20;\nvar MAX = 20;\n\n// initialize code called once per entity\nPlatform.prototype.initialize = function() {\n    var app = this.app;\n    this.setSpeed(5);\n    this.player = app.root.findByName(\"Player\");\n    this.player.script.player.on(\"die\", this.onPlayerDie, this);\n\n    this.game = app.root.findByName(\"Root\");\n    this.game.script.game.on(\"reset\", this.onReset, this);\n};\n\n// update code called every frame\nPlatform.prototype.update = function(dt) {\n    var p = this.entity.getLocalPosition();\n\n    p.z += (this.speed * dt);\n    if (p.z < MIN && this.speed < 0) {\n        p.z = pc.math.clamp(-p.z, MIN, MAX);\n    }\n    if (p.z > MAX && this.speed > 0) {\n        p.z = pc.math.clamp(-p.z, MIN, MAX);\n    }\n\n    if (p.y < 0) {\n        p.y += 0.9*dt;\n        if (p.y > 0) {\n            p.y = 0;\n        }\n    }\n\n    this.entity.setLocalPosition(p);\n};\n\nPlatform.prototype.setSpeed = function (speed) {\n    this.speed = speed;\n    this._oldSpeed = this.speed;\n};\n\nPlatform.prototype.dip = function () {\n    this.dipping = 0.1;\n    var p = this.entity.getLocalPosition();\n    p.y -= 0.3;\n    this.entity.setLocalPosition(p);\n};\n\nPlatform.prototype.onReset = function () {\n    this.speed = this._oldSpeed;\n};\n\nPlatform.prototype.onPlayerDie = function () {\n    if (this.speed !== 0) {\n        this._oldSpeed = this.speed;\n        this.speed = 0;                \n    }\n};\n\n\n","// scoreKeeper.js\n\n// method one: define a global function to set the score\nwindow.setScore = function (score) {\n    var app = pc.Application.getApplication();\n    alert(\"window.setScore:\"+score);\n    //var entity = app.root.findByName(\"Score Keeper\");\n    //entity.script.scoreKeeper.setScore(score);\n};\n\nvar ScoreKeeper = pc.createScript(\"scoreKeeper\");\n\nScoreKeeper.prototype.initialize = function (entity) {\n    // method two: define an application event to set the score\n    alert(\"ScoreKeeper.initialize\");\n    this.app.on(\"score:set\", function (score) {\n        alert(\"调用playcanvas\");\n        this.setScore(score);\n    }, this);\n};\n\nScoreKeeper.prototype.setScore = function (score) {\n    alert(\"ScoreKeeper.score = \"+score);\n};\n\n"]}